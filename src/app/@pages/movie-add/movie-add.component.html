<app-simple-loader *ngIf="loading"></app-simple-loader>
<form (ngSubmit)="onSubmit()" [formGroup]="createForm" *ngIf="!loading">
  <div class="mb-3">
    <label for="title" class="form-label">{{
      "forms.labels.title" | translate
    }}</label>
    <input
      type="text"
      class="form-control"
      id="title"
      placeholder="{{ 'forms.labels.title' | translate }}"
      formControlName="title"
      [ngClass]="{ 'is-invalid': form.title.errors && form.title.touched && form.title.invalid }"
    />
    <div *ngIf="form['title'].errors" class="invalid-feedback">
      <div *ngIf="form['title'].errors['required']">
        {{ "forms.validationMessages.titleRequired" | translate }}
      </div>
    </div>
  </div>
  <div class="mb-3">
    <label for="poster" class="form-label">{{
      "forms.labels.poster" | translate
    }}</label>
    <input
      type="url"
      class="form-control"
      id="poster"
      placeholder="{{ 'forms.labels.poster' | translate }}"
      formControlName="poster"
      [ngClass]="{
        'is-invalid':
          form.poster.errors && form.poster.touched && form.poster.invalid
      }"
    />
    <div
      *ngIf="form.poster.touched && form.poster.invalid"
      class="invalid-feedback"
    >
      <div *ngIf="form.poster.errors?.required">Please provide url</div>
      <div *ngIf="form.poster.errors?.pattern">Please provide valid url</div>
    </div>
  </div>
  <div class="mb-3">
    <label for="poster" class="form-label">{{
      "forms.labels.company" | translate
    }}</label>
    <select
      class="custom-select mb-3 form-select"
      (change)="changeCompany($event)"
      formControlName="company"
    >
      <option [ngValue]="null" disabled>
        {{ "forms.labels.companyDescription" | translate }}
      </option>
      <option *ngFor="let company of companiesList" [ngValue]="company.name">
        {{ company.name }}
      </option>
    </select>
  </div>

  <div class="mb-3">
    <label for="year" class="form-label">{{
      "forms.labels.releaseYear" | translate
    }}</label>
    <input
      type="number"
      id="year"
      class="form-control"
      name="year"
      min="2000"
      max="{{ yearLimit }}"
      step="1"
      formControlName="year"
    />
  </div>
  <div class="mb-3">
    <label for="duration" class="form-label">{{
      "forms.labels.duration" | translate
    }}</label>
    <input
      type="number"
      id="duration"
      class="form-control"
      name="duration"
      min="70"
      max="300"
      step="1"
      formControlName="duration"
    />
  </div>
  <div class="mb-3">
    <label for="rating" class="form-label">{{
      "forms.labels.ratings" | translate
    }}</label>
    <input
      type="number"
      class="form-control"
      min="1"
      max="10"
      step="1"
      formControlName="rating"
    />
  </div>
  <button type="submit" class="btn btn-primary">
    {{ "forms.buttons.submit" | translate }}
  </button>
</form>
